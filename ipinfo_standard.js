var obj = JSON.parse($response.body);
var flags = new Map([["AC","ğŸ‡¦ğŸ‡¨"],["AE","ğŸ‡¦ğŸ‡ª"],["AU","ğŸ‡¦ğŸ‡º"],["CA","ğŸ‡¨ğŸ‡¦"],["CH","ğŸ‡¨ğŸ‡­"],["CN","ğŸ‡¨ğŸ‡³"],["DE","ğŸ‡©ğŸ‡ª"],["FR","ğŸ‡«ğŸ‡·"],["GB","ğŸ‡¬ğŸ‡§"],["HK","ğŸ‡­ğŸ‡°"],["ID","ğŸ‡®ğŸ‡©"],["IN","ğŸ‡®ğŸ‡³"],["JP","ğŸ‡¯ğŸ‡µ"],["KR","ğŸ‡°ğŸ‡·"],["MO","ğŸ‡²ğŸ‡´"],["MY","ğŸ‡²ğŸ‡¾"],["NL","ğŸ‡³ğŸ‡±"],["PH","ğŸ‡µğŸ‡­"],["RU","ğŸ‡·ğŸ‡º"],["SG","ğŸ‡¸ğŸ‡¬"],["TH","ğŸ‡¹ğŸ‡­"],["TW","ğŸ‡¹ğŸ‡¼"],["UK","ğŸ‡¬ğŸ‡§"],["US","ğŸ‡ºğŸ‡¸"],["VN","ğŸ‡»ğŸ‡³"]]);
var flag = flags.get(obj.country) || "ğŸ³ï¸";
var org = obj.org || "Unknown";
var city = obj.city || "";
var region = obj.region || "";
var country = obj.country || "";
var ip = obj.ip || "";
var title = flag + " " + country + (city ? " - " + city : "");
var subtitle = org;
var description = (city ? city + ", " : "") + (region ? region + ", " : "") + country + "\n" + org + "\nIP: " + ip;
$done({title: title, subtitle: subtitle, ip: ip, description: description});
